<!-- filepath: p:\DevEnv\OffensiveGUI-Pro\templates\settings.html -->
{% extends "base.html" %}

{% block title %}
Settings - OffensiveGUI
{% endblock %}

{% block content %}
<div class="container-fluid mt-5">
    <!-- Header with Animation -->
    <div class="row g-3 mb-4 mt-5">
        <div class="col-12">
            <div class="bg-dark text-white rounded p-4 text-center shadow animate__animated animate__fadeIn animate__faster" style="background: linear-gradient(to right, #1a1a2e, #16213e);">
                <h1 class="mb-0 display-5 fw-bold animate__animated animate__slideInDown">
                    <i class="fas fa-cogs me-3 text-warning animate__animated animate__pulse animate__infinite animate__slow"></i>System Settings
                </h1>
                <p class="text-light mt-2 mb-0 lead animate__animated animate__fadeIn animate__delay-1s">Configure and manage your application environment</p>
            </div>
        </div>
    </div>

    <div class="row g-3">
        <!-- Main Settings Sections -->
        <div class="col-lg-9">
            <!-- Database Management Section -->
            <div class="card shadow border-0 mb-4 animate__animated animate__fadeInLeft">
                <div class="card-body rounded" style="background: linear-gradient(to right, #0f0f1a, #1a1a2e);">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2 class="text-white mb-0">
                            <i class="fas fa-database me-2 text-primary"></i>Database Management
                        </h2>
                        <span class="badge bg-info px-3 py-2">System Core</span>
                    </div>
                    <p class="text-light mb-4">
                        These operations affect your system's database. Use with caution as some actions cannot be undone.
                    </p>
                    
                    <div class="row g-3">
                        <!-- Delete Database Card -->
                        <div class="col-md-6">
                            <div class="card bg-dark text-white h-100 border-0 shadow-sm hover-card">
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="danger-icon-container d-inline-block rounded-circle p-3 mb-2">
                                            <i class="fas fa-trash-alt fa-2x text-danger"></i>
                                        </span>
                                        <h3>Delete Database</h3>
                                    </div>
                                    <p class="card-text">
                                        This action will permanently delete all data in the database. This operation cannot be undone.
                                    </p>
                                </div>
                                <div class="card-footer bg-transparent border-0 text-center">
                                    <form action="{{ url_for('delete_database') }}" method="POST">
                                        <button type="submit" class="btn btn-outline-danger btn-lg mt-2 w-100" onclick="return confirm('WARNING: This will delete ALL data. Are you absolutely sure?');">
                                            <i class="fas fa-trash-alt me-2"></i>Delete Database
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recreate Database Card -->
                        <div class="col-md-6">
                            <div class="card bg-dark text-white h-100 border-0 shadow-sm hover-card">
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="warning-icon-container d-inline-block rounded-circle p-3 mb-2">
                                            <i class="fas fa-database fa-2x text-warning"></i>
                                        </span>
                                        <h3>Recreate Database</h3>
                                    </div>
                                    <p class="card-text">
                                        Rebuilds the database structure from scratch. All existing data will be permanently lost.
                                    </p>
                                </div>
                                <div class="card-footer bg-transparent border-0 text-center">
                                    <form action="{{ url_for('recreate_database') }}" method="POST">
                                        <button type="submit" class="btn btn-outline-warning btn-lg mt-2 w-100" onclick="return confirm('This will reset your database structure. Continue?');">
                                            <i class="fas fa-database me-2"></i>Recreate Database
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Target Management Section -->
            <div class="card shadow border-0 mb-4 animate__animated animate__fadeInRight">
                <div class="card-body rounded" style="background: linear-gradient(to right, #0f0f1a, #1a1a2e);">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2 class="text-white mb-0">
                            <i class="fas fa-crosshairs me-2 text-danger"></i>Target Management
                        </h2>
                        <span class="badge bg-primary px-3 py-2">Data Control</span>
                    </div>
                    <p class="text-light mb-4">
                        Tools to manage the targets in your system. Use these options to populate or clear target data.
                    </p>
                    
                    <div class="row g-3">
                        <!-- Create Example Targets Card -->
                        <div class="col-md-6">
                            <div class="card bg-dark text-white h-100 border-0 shadow-sm hover-card">
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="success-icon-container d-inline-block rounded-circle p-3 mb-2">
                                            <i class="fas fa-plus-circle fa-2x text-success"></i>
                                        </span>
                                        <h3>Create Example Targets</h3>
                                    </div>
                                    <p class="card-text">
                                        Quickly populate your system with 3 example targets for demonstration and testing purposes.
                                    </p>
                                </div>
                                <div class="card-footer bg-transparent border-0 text-center">
                                    <form action="{{ url_for('create_example_targets') }}" method="POST">
                                        <button type="submit" class="btn btn-outline-success btn-lg mt-2 w-100">
                                            <i class="fas fa-plus-circle me-2"></i>Generate Example Data
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Clear All Targets Card -->
                        <div class="col-md-6">
                            <div class="card bg-dark text-white h-100 border-0 shadow-sm hover-card">
                                <div class="card-body">
                                    <div class="text-center mb-3">
                                        <span class="danger-icon-container d-inline-block rounded-circle p-3 mb-2">
                                            <i class="fas fa-trash fa-2x text-danger"></i>
                                        </span>
                                        <h3>Clear All Targets</h3>
                                    </div>
                                    <p class="card-text">
                                        Remove all targets from the database while keeping the database structure intact.
                                    </p>
                                </div>
                                <div class="card-footer bg-transparent border-0 text-center">
                                    <form action="{{ url_for('clear_all_targets') }}" method="POST">
                                        <button type="submit" class="btn btn-outline-danger btn-lg mt-2 w-100" onclick="return confirm('Are you sure you want to delete ALL targets?');">
                                            <i class="fas fa-trash me-2"></i>Clear All Targets
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Monitor Section -->
        <div class="col-lg-3">
            <div class="card shadow border-0 animate__animated animate__fadeInRight" style="height: 75vh; overflow: auto;">
                <div class="card-body rounded d-flex flex-column" style="background: linear-gradient(to bottom, #1a1a2e, #0f0f1a);">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="text-white">
                            <i class="fas fa-history me-2 text-info animate__animated animate__pulse animate__infinite"></i>Activity Log
                        </h2>
                        <span class="badge bg-dark px-3 py-2">Live</span>
                    </div>
                    <hr class="bg-secondary">
                    
                    <div class="overflow-auto flex-grow-1" style="max-height: calc(100vh - 200px);">
                        {% if db_logs %}
                        <table class="table table-dark table-hover table-bordered text-center align-middle">
                            <thead class="table-secondary text-dark">
                                <tr>
                                    <th scope="col" class="bg-secondary text-white">Timestamp</th>
                                    <th scope="col" class="bg-secondary text-white">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for log in db_logs %}
                                <tr class="log-entry animate__animated animate__fadeIn">
                                    <td class="text-light">
                                        <i class="fas fa-clock me-1"></i>
                                        {{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                                    </td>
                                    <td>
                                        <span class="badge bg-info text-dark px-3 py-2">
                                            {{ log.action }}
                                        </span>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <div class="alert alert-info text-center">
                            <i class="fas fa-info-circle me-2"></i>No activities logged yet.
                            <div class="mt-3">
                                <small class="text-muted">System actions will appear here</small>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Custom Styling -->
<style>
    /* Animation for the icon containers */
    .danger-icon-container {
        background: rgba(220, 53, 69, 0.2);
        transition: all 0.3s ease;
    }
    
    .warning-icon-container {
        background: rgba(255, 193, 7, 0.2);
        transition: all 0.3s ease;
    }
    
    .success-icon-container {
        background: rgba(25, 135, 84, 0.2);
        transition: all 0.3s ease;
    }
    
    /* Hover effects for cards */
    .hover-card {
        transition: all 0.3s ease;
    }
    
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.4) !important;
    }
    
    .hover-card:hover .danger-icon-container {
        background: rgba(220, 53, 69, 0.4);
    }
    
    .hover-card:hover .warning-icon-container {
        background: rgba(255, 193, 7, 0.4);
    }
    
    .hover-card:hover .success-icon-container {
        background: rgba(25, 135, 84, 0.4);
    }
    
    /* Glowing animations for icons */
    @keyframes glow {
        0% { text-shadow: 0 0 10px rgba(255,255,255,0.2); }
        50% { text-shadow: 0 0 20px rgba(255,255,255,0.6); }
        100% { text-shadow: 0 0 10px rgba(255,255,255,0.2); }
    }
    
    .text-warning, .text-danger, .text-success, .text-info {
        animation: glow 2s infinite;
    }
    
    /* Log entry animation */
    .log-entry {
        transition: background-color 0.3s ease;
    }
    
    .log-entry:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
    }
</style>

<!-- Initialize tooltips -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add confirmation dialogs to dangerous actions
        const dangerButtons = document.querySelectorAll('.btn-danger, .btn-outline-danger');
        dangerButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                if (!confirm('Are you sure you want to proceed with this action?')) {
                    e.preventDefault();
                }
            });
        });
    });
</script>
{% endblock %}