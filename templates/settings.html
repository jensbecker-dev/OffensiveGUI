<!-- filepath: p:\DevEnv\OffensiveGUI-Pro\templates\settings.html -->
{% extends "base.html" %}

{% block title %}
Settings - OffensiveGUI
{% endblock %}

{% block content %}
<div class="container-fluid mt-5">
    <div class="row g-3">
        <!-- Main Settings Sections -->
        <div class="col-lg-9">
            <div class="card shadow-sm border-0">
                <div class="card-body bg-dark text-white rounded">
                    <h1 class="text-center">
                        <i class="fas fa-cogs me-2"></i>Settings
                    </h1>
                    <p class="text-center mt-3">Manage your application settings and database.</p>
                </div>
            </div>
            <div class="row g-3 mt-2">
                <!-- Delete Database Section -->
                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-body bg-dark text-white rounded">
                            <h2 class="text-center">
                                <i class="fas fa-trash-alt me-2 text-danger"></i>Delete Database
                            </h2>
                            <p class="text-center mt-4 mb-4">
                                This action will permanently delete all data in the database. Proceed with caution.
                            </p>
                            <form action="{{ url_for('delete_database') }}" method="POST" class="text-center">
                                <button type="submit" class="btn btn-danger btn-lg">
                                    <i class="fas fa-trash-alt me-2"></i>Delete Database
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Recreate Database Section -->
                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-body bg-dark text-white rounded">
                            <h2 class="text-center">
                                <i class="fas fa-database me-2 text-warning"></i>Recreate Database
                            </h2>
                            <p class="text-center mt-4 mb-4">
                                This action will recreate the database structure. Existing data will be lost.
                            </p>
                            <form action="{{ url_for('recreate_database') }}" method="POST" class="text-center">
                                <button type="submit" class="btn btn-warning btn-lg">
                                    <i class="fas fa-database me-2"></i>Recreate Database
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-3 mt-2">
                <!-- Create Example Targets Section -->
                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-body bg-dark text-white rounded">
                            <h2 class="text-center">
                                <i class="fas fa-plus-circle me-2 text-success"></i>Create Example Targets
                            </h2>
                            <p class="text-center mt-4 mb-4">
                                This action will create 3 example targets for testing purposes.
                            </p>
                            <form action="{{ url_for('create_example_targets') }}" method="POST" class="text-center">
                                <button type="submit" class="btn btn-success btn-lg">
                                    <i class="fas fa-plus-circle me-2"></i>Create Example Targets
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Clear All Targets Section -->
                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-body bg-dark text-white rounded">
                            <h2 class="text-center">
                                <i class="fas fa-trash me-2 text-danger"></i>Clear All Targets
                            </h2>
                            <p class="text-center mt-4 mb-4">
                                This action will delete all targets from the database. Proceed with caution.
                            </p>
                            <form action="{{ url_for('clear_all_targets') }}" method="POST" class="text-center">
                                <button type="submit" class="btn btn-danger btn-lg">
                                    <i class="fas fa-trash me-2"></i>Clear All Targets
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Monitor Section -->
        <div class="col-lg-3">
            <div class="card shadow-sm border-0" style="height: 90vh; overflow: auto;">
                <div class="card-body bg-dark text-white rounded d-flex flex-column">
                    <h2 class="text-center">
                        <i class="fas fa-history me-2 text-primary"></i>Activity Monitor
                    </h2>
                    <hr class="bg-light">
                    <div class="overflow-auto flex-grow-1" style="max-height: calc(100vh - 200px);">
                        {% if db_logs %}
                        <table class="table table-dark table-hover table-bordered text-center">
                            <thead>
                                <tr>
                                    <th>Timestamp</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for log in db_logs %}
                                <tr>
                                    <td>{{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                                    <td>{{ log.action }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <p class="text-center">No activities logged yet.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}